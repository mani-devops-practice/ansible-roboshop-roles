- name: Installing dependencies
  ansible.builtin.dnf:
    name: "{{ item }}"
    state: present
  loop:
    - python3
    - gcc
    - python3-devel

- name: app setup
  ansible.builtin.import_role:
    name: comman
    tasks_from: app-setup.yaml

- name: install requrements.txt
  ansible.builtin.command: pip3 install -r requirements.txt
  args:
    chdir: /app

- name: copy payment service
  ansible.builtin.template:
    src: payment.service
    dest: /etc/systemd/system/payment.service

- name: systemd setup
  ansible.builtin.import_role:
    name: comman
    tasks_from: systemd-setup